---
title:  "(UNDER CONSTRUCTION) Exploit Development: Windows Kernel Exploitation Part 1 - Debugging Environment and Stack Overflow"
date:   2019-09-21
tags: [posts]
excerpt: "An introduction to creating a kernel debugging environment with WinDbg and IDA to analyze and exploit a vulnerable kernel driver."
---
Introduction
---
As I am currently preparing for Offensive Security's [Advanced Windows Exploitation](https://www.offensive-security.com/documentation/advanced-windows-exploitation.pdf) course, I realized I had a disconnect with some prerequisite knowledge needed to succeed in the course (and in my personal exploit development growth). Among those topics, was kernel exploitation in a Windows environment. A professor, whom I am very close with, once explained to me many moons ago about kernel debugging. He explained it was done remotely, instead of locally (which is what I currently had experience with up until this point). Up until now, that was the only knowledge I had about anything related to the kernel.

Today, I just wanted to document a few things I have done in preparation for the AWE course coming up this year at BlackHat (where I will opefully get a seat). Among these are: how to use WinDbg at a high level (I have experience with WinDbg, but I want to get better, as this is what is used in the AWE course), how to use IDA freeware at a high level (reasoning is synonymous with WinDbg explanation), and how to exploit a vulnerable Windows kernel driver. 

The vulnerable driver I will be analyzing and exploiting today is from the HackSysExtreme team, with their [HackSysExtreme Vulnerable Driver](https://github.com/hacksysteam/HackSysExtremeVulnerableDriver) (HEVD). I cannot stress enough how much HackSysExtreme has done for vulnerability researchers. With that said, let's get into the debugging environment setup.

Setting up the Debugging Environment
---
For our purposes, you will need four things:

1. Windows 7 32-bit VM (need a 32 bit OS)
2. [WinDbg](https://www.microsoft.com/en-us/download/details.aspx?id=8279) (our debugger for remote kernel debugging. Just install the debugging tools.)
3. [IDA freeware](https://www.scummvm.org/news/20180331/) (for disassembly and analyzing the vulnerability)
4. [OSRLOADER](https://www.osronline.com/OsrDown.cfm/osrloaderv30.zip) (for loading the driver)

I will chaining this blog post with future posts to create a series on the other various kernel exploitation methods HEVD provides us to practice with. Eventually, that means 64-bit exploitation will be in future blogs. In the meantime, we have to learn to walk before we can run.
